# ───────────────────────────────
# 🌌 Kitty Configuration (TokyoNight Soft)
# Author: ChatGPT for PhoenixC
# System: macOS 12.7.6 (Monterey) / MacBook Pro (Retina, 15-inch, Mid 2015)
# ───────────────────────────────

# 包含主题文件
include Tomorrow_Night_Eighties.conf

# ───────────────────────────────
# 🧱 字体与显示
# ───────────────────────────────
font_family      Caskaydia Cove Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        11.0

# Retina 字体渲染优化
adjust_line_height  120%
adjust_column_width 100%
macos_thicken_font  0.25
dpi_aware yes

# 光标样式
cursor_shape block
cursor_blink_interval 600
cursor_stop_blinking_after 15.0

# 选区透明度与外观
# selection_foreground none
# selection_background #33467C

# ───────────────────────────────
# 💨 性能优化 (针对2015 GPU)
# ───────────────────────────────
repaint_delay  10
input_delay    2
sync_to_monitor yes
use_gpu        yes
enable_audio_bell no
detect_urls    yes

# 防止显卡高温
max_frame_rate 90
window_padding_width 6
background_opacity 0.94
dynamic_background_opacity yes
dim_opacity 0.1
inactive_text_alpha 0.9

# ───────────────────────────────
# 🖼️ 窗口外观
# ───────────────────────────────
window_margin_width  0
window_padding_width 0
tab_bar_edge         top
tab_bar_style        powerline
tab_powerline_style  round
tab_title_template   "{index}: {title}"
hide_window_decorations titlebar-only
remember_window_size yes
initial_window_width  120c
initial_window_height 35c

# ───────────────────────────────
# 🧩 启动行为与Shell
# ───────────────────────────────
# shell /bin/zsh
# editor nvim
confirm_os_window_close  0
allow_remote_control yes
focus_follows_mouse no
close_on_child_death no
scrollback_lines 20000

# 默认启动会话，可选
# startup_session ~/.config/kitty/session.conf

# ───────────────────────────────
# 🌈 状态栏和标签栏样式
# ───────────────────────────────
active_tab_foreground   #1a1b26
active_tab_background   #7aa2f7
inactive_tab_foreground #a9b1d6
inactive_tab_background #292e42
tab_bar_background      #1f2335

active_border_color     #7aa2f7
inactive_border_color   #292e42
bell_border_color       #ff9e64

# ───────────────────────────────
# 🧠 可选模块 (增强体验)
# ───────────────────────────────
# 启用 Kitty kittens 命令（图像/超链接等）
allow_hyperlinks yes
detect_urls yes

# 显示光标所在行号 (适配 zellij/vim)
strip_trailing_spaces smart
scroll_on_output yes
scroll_on_keystroke no

# 透明背景模糊 (仅 macOS)
macos_background_blur 20

copy_on_select a1

# ───────────────────────────────
# ✨ 终端细节优化
# ───────────────────────────────
# 避免滚动撕裂
scrollback_pager less --chop-long-lines
# term xterm-kitty
update_check_interval 0
shell_integration yes

# ───────────────────────────────
# ⚡ 快捷键映射 (macOS 常用)
# ───────────────────────────────
map left_option alt
map right_option none

map cmd+t       new_tab
map cmd+w       close_tab
map cmd+enter   new_window
# map cmd+,       next_tab
# map cmd+.       previous_tab

# 复制/粘贴行为
map cmd+c       copy_to_clipboard
map cmd+v       paste_from_clipboard

# tab bar Key mappings
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

# make option key work for alt-f / alt-b
macos_option_as_alt yes
# ───────────────────────────────
# ⚡ 环境变量
# ───────────────────────────────
# env TERM=xterm-kitty
